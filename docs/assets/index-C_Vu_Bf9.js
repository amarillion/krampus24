var hn=Object.defineProperty;var dn=(i,t,e)=>t in i?hn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var _=(i,t,e)=>dn(i,typeof t!="symbol"?t+"":t,e);import{r as gn,g as ne}from"./phaser-MUclhth5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var mn=gn();const st=ne(mn);var Mt={exports:{}},he;function pn(){return he||(he=1,function(i){(function(){function t(s,c,h){return s.call.apply(s.bind,arguments)}function e(s,c,h){if(!s)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(m,f),s.apply(c,m)}}return function(){return s.apply(c,arguments)}}function n(s,c,h){return n=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?t:e,n.apply(null,arguments)}var r=Date.now||function(){return+new Date};function o(s,c){this.a=s,this.o=c||s,this.c=this.o.document}var a=!!window.FontFace;function l(s,c,h,f){if(c=s.c.createElement(c),h)for(var m in h)h.hasOwnProperty(m)&&(m=="style"?c.style.cssText=h[m]:c.setAttribute(m,h[m]));return f&&c.appendChild(s.c.createTextNode(f)),c}function u(s,c,h){s=s.c.getElementsByTagName(c)[0],s||(s=document.documentElement),s.insertBefore(h,s.lastChild)}function d(s){s.parentNode&&s.parentNode.removeChild(s)}function g(s,c,h){c=c||[],h=h||[];for(var f=s.className.split(/\s+/),m=0;m<c.length;m+=1){for(var M=!1,D=0;D<f.length;D+=1)if(c[m]===f[D]){M=!0;break}M||f.push(c[m])}for(c=[],m=0;m<f.length;m+=1){for(M=!1,D=0;D<h.length;D+=1)if(f[m]===h[D]){M=!0;break}M||c.push(f[m])}s.className=c.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(s,c){for(var h=s.className.split(/\s+/),f=0,m=h.length;f<m;f++)if(h[f]==c)return!0;return!1}function p(s){return s.o.location.hostname||s.a.location.hostname}function w(s,c,h){function f(){k&&m&&M&&(k(D),k=null)}c=l(s,"link",{rel:"stylesheet",href:c,media:"all"});var m=!1,M=!0,D=null,k=h||null;a?(c.onload=function(){m=!0,f()},c.onerror=function(){m=!0,D=Error("Stylesheet failed to load"),f()}):setTimeout(function(){m=!0,f()},0),u(s,"head",c)}function R(s,c,h,f){var m=s.c.getElementsByTagName("head")[0];if(m){var M=l(s,"script",{src:c}),D=!1;return M.onload=M.onreadystatechange=function(){D||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(D=!0,h&&h(null),M.onload=M.onreadystatechange=null,M.parentNode.tagName=="HEAD"&&m.removeChild(M))},m.appendChild(M),setTimeout(function(){D||(D=!0,h&&h(Error("Script load timeout")))},f||5e3),M}return null}function C(){this.a=0,this.c=null}function q(s){return s.a++,function(){s.a--,L(s)}}function B(s,c){s.c=c,L(s)}function L(s){s.a==0&&s.c&&(s.c(),s.c=null)}function z(s){this.a=s||"-"}z.prototype.c=function(s){for(var c=[],h=0;h<arguments.length;h++)c.push(arguments[h].replace(/[\W_]+/g,"").toLowerCase());return c.join(this.a)};function x(s,c){this.c=s,this.f=4,this.a="n";var h=(c||"n4").match(/^([nio])([1-9])$/i);h&&(this.a=h[1],this.f=parseInt(h[2],10))}function j(s){return P(s)+" "+(s.f+"00")+" 300px "+S(s.c)}function S(s){var c=[];s=s.split(/,\s*/);for(var h=0;h<s.length;h++){var f=s[h].replace(/['"]/g,"");f.indexOf(" ")!=-1||/^\d/.test(f)?c.push("'"+f+"'"):c.push(f)}return c.join(",")}function E(s){return s.a+s.f}function P(s){var c="normal";return s.a==="o"?c="oblique":s.a==="i"&&(c="italic"),c}function A(s){var c=4,h="n",f=null;return s&&((f=s.match(/(normal|oblique|italic)/i))&&f[1]&&(h=f[1].substr(0,1).toLowerCase()),(f=s.match(/([1-9]00|normal|bold)/i))&&f[1]&&(/bold/i.test(f[1])?c=7:/[1-9]00/.test(f[1])&&(c=parseInt(f[1].substr(0,1),10)))),h+c}function N(s,c){this.c=s,this.f=s.o.document.documentElement,this.h=c,this.a=new z("-"),this.j=c.events!==!1,this.g=c.classes!==!1}function b(s){s.g&&g(s.f,[s.a.c("wf","loading")]),v(s,"loading")}function T(s){if(s.g){var c=y(s.f,s.a.c("wf","active")),h=[],f=[s.a.c("wf","loading")];c||h.push(s.a.c("wf","inactive")),g(s.f,h,f)}v(s,"inactive")}function v(s,c,h){s.j&&s.h[c]&&(h?s.h[c](h.c,E(h)):s.h[c]())}function I(){this.c={}}function H(s,c,h){var f=[],m;for(m in c)if(c.hasOwnProperty(m)){var M=s.c[m];M&&f.push(M(c[m],h))}return f}function K(s,c){this.c=s,this.f=c,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function nt(s){u(s.c,"body",s.a)}function tt(s){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+S(s.c)+";"+("font-style:"+P(s)+";font-weight:"+(s.f+"00")+";")}function et(s,c,h,f,m,M){this.g=s,this.j=c,this.a=f,this.c=h,this.f=m||3e3,this.h=M||void 0}et.prototype.start=function(){var s=this.c.o.document,c=this,h=r(),f=new Promise(function(D,k){function U(){r()-h>=c.f?k():s.fonts.load(j(c.a),c.h).then(function(O){1<=O.length?D():setTimeout(U,25)},function(){k()})}U()}),m=null,M=new Promise(function(D,k){m=setTimeout(k,c.f)});Promise.race([M,f]).then(function(){m&&(clearTimeout(m),m=null),c.g(c.a)},function(){c.j(c.a)})};function Q(s,c,h,f,m,M,D){this.v=s,this.B=c,this.c=h,this.a=f,this.s=D||"BESbswy",this.f={},this.w=m||3e3,this.u=M||null,this.m=this.j=this.h=this.g=null,this.g=new K(this.c,this.s),this.h=new K(this.c,this.s),this.j=new K(this.c,this.s),this.m=new K(this.c,this.s),s=new x(this.a.c+",serif",E(this.a)),s=tt(s),this.g.a.style.cssText=s,s=new x(this.a.c+",sans-serif",E(this.a)),s=tt(s),this.h.a.style.cssText=s,s=new x("serif",E(this.a)),s=tt(s),this.j.a.style.cssText=s,s=new x("sans-serif",E(this.a)),s=tt(s),this.m.a.style.cssText=s,nt(this.g),nt(this.h),nt(this.j),nt(this.m)}var Y={D:"serif",C:"sans-serif"},rt=null;function ut(){if(rt===null){var s=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);rt=!!s&&(536>parseInt(s[1],10)||parseInt(s[1],10)===536&&11>=parseInt(s[2],10))}return rt}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),lt(this)};function vt(s,c,h){for(var f in Y)if(Y.hasOwnProperty(f)&&c===s.f[Y[f]]&&h===s.f[Y[f]])return!0;return!1}function lt(s){var c=s.g.a.offsetWidth,h=s.h.a.offsetWidth,f;(f=c===s.f.serif&&h===s.f["sans-serif"])||(f=ut()&&vt(s,c,h)),f?r()-s.A>=s.w?ut()&&vt(s,c,h)&&(s.u===null||s.u.hasOwnProperty(s.a.c))?J(s,s.v):J(s,s.B):Ct(s):J(s,s.v)}function Ct(s){setTimeout(n(function(){lt(this)},s),50)}function J(s,c){setTimeout(n(function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),c(this.a)},s),0)}function $(s,c,h){this.c=s,this.a=c,this.f=0,this.m=this.j=!1,this.s=h}var W=null;$.prototype.g=function(s){var c=this.a;c.g&&g(c.f,[c.a.c("wf",s.c,E(s).toString(),"active")],[c.a.c("wf",s.c,E(s).toString(),"loading"),c.a.c("wf",s.c,E(s).toString(),"inactive")]),v(c,"fontactive",s),this.m=!0,ft(this)},$.prototype.h=function(s){var c=this.a;if(c.g){var h=y(c.f,c.a.c("wf",s.c,E(s).toString(),"active")),f=[],m=[c.a.c("wf",s.c,E(s).toString(),"loading")];h||f.push(c.a.c("wf",s.c,E(s).toString(),"inactive")),g(c.f,f,m)}v(c,"fontinactive",s),ft(this)};function ft(s){--s.f==0&&s.j&&(s.m?(s=s.a,s.g&&g(s.f,[s.a.c("wf","active")],[s.a.c("wf","loading"),s.a.c("wf","inactive")]),v(s,"active")):T(s.a))}function ie(s){this.j=s,this.a=new I,this.h=0,this.f=this.g=!0}ie.prototype.load=function(s){this.c=new o(this.j,s.context||this.j),this.g=s.events!==!1,this.f=s.classes!==!1,Ze(this,new N(this.c,s),s)};function Xe(s,c,h,f,m){var M=--s.h==0;(s.f||s.g)&&setTimeout(function(){var D=m||null,k=f||null||{};if(h.length===0&&M)T(c.a);else{c.f+=h.length,M&&(c.j=M);var U,O=[];for(U=0;U<h.length;U++){var G=h[U],V=k[G.c],X=c.a,ht=G;if(X.g&&g(X.f,[X.a.c("wf",ht.c,E(ht).toString(),"loading")]),v(X,"fontloading",ht),X=null,W===null)if(window.FontFace){var ht=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),fn=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);W=ht?42<parseInt(ht[1],10):!fn}else W=!1;W?X=new et(n(c.g,c),n(c.h,c),c.c,G,c.s,V):X=new Q(n(c.g,c),n(c.h,c),c.c,G,c.s,D,V),O.push(X)}for(U=0;U<O.length;U++)O[U].start()}},0)}function Ze(s,c,h){var m=[],f=h.timeout;b(c);var m=H(s.a,h,s.c),M=new $(s.c,c,f);for(s.h=m.length,c=0,h=m.length;c<h;c++)m[c].load(function(D,k,U){Xe(s,M,D,k,U)})}function oe(s,c){this.c=s,this.a=c}oe.prototype.load=function(s){function c(){if(M["__mti_fntLst"+f]){var D=M["__mti_fntLst"+f](),k=[],U;if(D)for(var O=0;O<D.length;O++){var G=D[O].fontfamily;D[O].fontStyle!=null&&D[O].fontWeight!=null?(U=D[O].fontStyle+D[O].fontWeight,k.push(new x(G,U))):k.push(new x(G))}s(k)}else setTimeout(function(){c()},50)}var h=this,f=h.a.projectId,m=h.a.version;if(f){var M=h.c.o;R(this.c,(h.a.api||"https://fast.fonts.net/jsapi")+"/"+f+".js"+(m?"?v="+m:""),function(D){D?s([]):(M["__MonotypeConfiguration__"+f]=function(){return h.a},c())}).id="__MonotypeAPIScript__"+f}else s([])};function se(s,c){this.c=s,this.a=c}se.prototype.load=function(s){var c,h,f=this.a.urls||[],m=this.a.families||[],M=this.a.testStrings||{},D=new C;for(c=0,h=f.length;c<h;c++)w(this.c,f[c],q(D));var k=[];for(c=0,h=m.length;c<h;c++)if(f=m[c].split(":"),f[1])for(var U=f[1].split(","),O=0;O<U.length;O+=1)k.push(new x(f[0],U[O]));else k.push(new x(f[0]));B(D,function(){s(k,M)})};function tn(s,c){s?this.c=s:this.c=en,this.a=[],this.f=[],this.g=c||""}var en="https://fonts.googleapis.com/css";function nn(s,c){for(var h=c.length,f=0;f<h;f++){var m=c[f].split(":");m.length==3&&s.f.push(m.pop());var M="";m.length==2&&m[1]!=""&&(M=":"),s.a.push(m.join(M))}}function rn(s){if(s.a.length==0)throw Error("No fonts to load!");if(s.c.indexOf("kit=")!=-1)return s.c;for(var c=s.a.length,h=[],f=0;f<c;f++)h.push(s.a[f].replace(/ /g,"+"));return c=s.c+"?family="+h.join("%7C"),0<s.f.length&&(c+="&subset="+s.f.join(",")),0<s.g.length&&(c+="&text="+encodeURIComponent(s.g)),c}function on(s){this.f=s,this.a=[],this.c={}}var ae={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},sn={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},an={i:"i",italic:"i",n:"n",normal:"n"},cn=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function un(s){for(var c=s.f.length,h=0;h<c;h++){var f=s.f[h].split(":"),m=f[0].replace(/\+/g," "),M=["n4"];if(2<=f.length){var D,k=f[1];if(D=[],k)for(var k=k.split(","),U=k.length,O=0;O<U;O++){var G;if(G=k[O],G.match(/^[\w-]+$/)){var V=cn.exec(G.toLowerCase());if(V==null)G="";else{if(G=V[2],G=G==null||G==""?"n":an[G],V=V[1],V==null||V=="")V="4";else var X=sn[V],V=X||(isNaN(V)?"4":V.substr(0,1));G=[G,V].join("")}}else G="";G&&D.push(G)}0<D.length&&(M=D),f.length==3&&(f=f[2],D=[],f=f?f.split(","):D,0<f.length&&(f=ae[f[0]])&&(s.c[m]=f))}for(s.c[m]||(f=ae[m])&&(s.c[m]=f),f=0;f<M.length;f+=1)s.a.push(new x(m,M[f]))}}function ce(s,c){this.c=s,this.a=c}var ln={Arimo:!0,Cousine:!0,Tinos:!0};ce.prototype.load=function(s){var c=new C,h=this.c,f=new tn(this.a.api,this.a.text),m=this.a.families;nn(f,m);var M=new on(m);un(M),w(h,rn(f),q(c)),B(c,function(){s(M.a,M.c,ln)})};function ue(s,c){this.c=s,this.a=c}ue.prototype.load=function(s){var c=this.a.id,h=this.c.o;c?R(this.c,(this.a.api||"https://use.typekit.net")+"/"+c+".js",function(f){if(f)s([]);else if(h.Typekit&&h.Typekit.config&&h.Typekit.config.fn){f=h.Typekit.config.fn;for(var m=[],M=0;M<f.length;M+=2)for(var D=f[M],k=f[M+1],U=0;U<k.length;U++)m.push(new x(D,k[U]));try{h.Typekit.load({events:!1,classes:!1,async:!0})}catch{}s(m)}},2e3):s([])};function le(s,c){this.c=s,this.f=c,this.a=[]}le.prototype.load=function(s){var c=this.f.id,h=this.c.o,f=this;c?(h.__webfontfontdeckmodule__||(h.__webfontfontdeckmodule__={}),h.__webfontfontdeckmodule__[c]=function(m,M){for(var D=0,k=M.fonts.length;D<k;++D){var U=M.fonts[D];f.a.push(new x(U.name,A("font-weight:"+U.weight+";font-style:"+U.style)))}s(f.a)},R(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+p(this.c)+"/"+c+".js",function(m){m&&s([])})):s([])};var it=new ie(window);it.a.c.custom=function(s,c){return new se(c,s)},it.a.c.fontdeck=function(s,c){return new le(c,s)},it.a.c.monotype=function(s,c){return new oe(c,s)},it.a.c.typekit=function(s,c){return new ue(c,s)},it.a.c.google=function(s,c){return new ce(c,s)};var fe={load:n(it.load,it)};i.exports?i.exports=fe:(window.WebFont=fe,window.WebFontConfig&&it.load(window.WebFontConfig))})()}(Mt)),Mt.exports}var yn=pn();const wn=ne(yn);class vn extends st.Scene{constructor(){super({key:"BootScene"});_(this,"fontsReady",!1)}preload(){this.fontsReady=!1,this.fontsLoaded=this.fontsLoaded.bind(this),this.add.text(100,100,"loading fonts..."),this.load.image("loaderBg","./images/loader-bg.png"),this.load.image("loaderBar","./images/loader-bar.png"),wn.load({google:{families:["Bangers"]},active:this.fontsLoaded})}update(){this.fontsReady&&this.scene.start("SplashScene")}fontsLoaded(){this.fontsReady=!0}}class Cn extends st.Scene{constructor(){super({key:"SplashScene"})}preload(){}create(){this.scene.start("TitleScreen")}update(){}}class En extends Error{constructor(t){super(t)}}function Pt(i,t=""){if(!i)throw new En(t)}function Et(i){return Pt(i!=null,`Expected value to be non-null and defined, but was ${i}`),i}const Ge=Math.sqrt(3),An=.5*(Ge-1),yt=(3-Ge)/6,de=i=>Math.floor(i)|0,ge=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function Sn(i=Math.random){const t=xn(i),e=new Float64Array(t).map(r=>ge[r%12*2]),n=new Float64Array(t).map(r=>ge[r%12*2+1]);return function(o,a){let l=0,u=0,d=0;const g=(o+a)*An,y=de(o+g),p=de(a+g),w=(y+p)*yt,R=y-w,C=p-w,q=o-R,B=a-C;let L,z;q>B?(L=1,z=0):(L=0,z=1);const x=q-L+yt,j=B-z+yt,S=q-1+2*yt,E=B-1+2*yt,P=y&255,A=p&255;let N=.5-q*q-B*B;if(N>=0){const v=P+t[A],I=e[v],H=n[v];N*=N,l=N*N*(I*q+H*B)}let b=.5-x*x-j*j;if(b>=0){const v=P+L+t[A+z],I=e[v],H=n[v];b*=b,u=b*b*(I*x+H*j)}let T=.5-S*S-E*E;if(T>=0){const v=P+1+t[A+1],I=e[v],H=n[v];T*=T,d=T*T*(I*S+H*E)}return 70*(l+u+d)}}function xn(i){const e=new Uint8Array(512);for(let n=0;n<512/2;n++)e[n]=n;for(let n=0;n<512/2-1;n++){const r=n+~~(i()*(256-n)),o=e[n];e[n]=e[r],e[r]=o}for(let n=256;n<512;n++)e[n]=e[n-256];return e}class mt{constructor(t,e,n){_(this,"x");_(this,"y");_(this,"z");this.x=t,this.y=e,this.z=n}static normalize(t){const e=mt.length(t);return new mt(t.x/e,t.y/e,t.z/e)}static length(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static dotProduct(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}}class F{constructor(t,e){_(this,"x");_(this,"y");this.x=t,this.y=e}rotate(t){return F.rotate(this,t)}static rotate(t,e){const{x:n,y:r}=t;switch((e+360)%360){case 270:return new F(-r,n);case 180:return new F(-n,-r);case 90:return new F(r,-n);case 0:return new F(n,r);default:Pt(!1,`Invalid value ${e}`)}}static times(t,e){return new F(t.x*e.x,t.y*e.y)}times(t){return F.times(this,t)}scale(t){return F.scale(this,t)}static scale(t,e){return new F(t.x*e,t.y*e)}mul(t){return F.mul(this,t)}static mul(t,e){return new F(t.x*e,t.y*e)}plus(t){return F.plus(this,t)}static plus(t,e){return new F(t.x+e.x,t.y+e.y)}minus(t){return F.minus(this,t)}static minus(t,e){return new F(t.x-e.x,t.y-e.y)}manhattan(){return F.manhattan(this)}static manhattan(t){return Math.abs(t.x)+Math.abs(t.y)}toString(){return F.toString(this)}static toString(t){return`${t.x},${t.y}`}equals(t){return F.equals(this,t)}static equals(t,e){return t.x===e.x&&t.y===e.y}static length(t){return Math.sqrt(t.x*t.x+t.y*t.y)}length(){return F.length(this)}static contains(t,e){return e.x>=0&&e.y>=0&&e.x<t.x&&e.y<t.y}contains(t){return F.contains(this,t)}}function Bn(i,t,e){return Math.max(t,Math.min(e,i))}function te(i,t){const e=Math.round(i/t)*t;return e===0?0:e}function*bn(i,t){for(let e=0;e<t;++e)for(let n=0;n<i;++n)yield{x:n,y:e}}class Tn{constructor(t){_(this,"config");_(this,"noise2D");_(this,"palettePromise");_(this,"lightSource",mt.normalize({x:.5,y:.8,z:-.3}));this.config=t,this.noise2D=Sn(),this.palettePromise=this.loadPalette()}async loadPalette(){const t=new Image;return t.src=this.config.paletteUrl,new Promise((e,n)=>{t.onload=()=>{const o=document.createElement("canvas").getContext("2d");if(o){o.drawImage(t,0,0,t.width,t.height);const a=o.getImageData(0,0,t.width,t.height);e(a)}else n("Can't create context")}})}getHeight(t,e){const{width:n,height:r}=this.config,o=this.noise2D(t/400,e/400),a=this.noise2D(t/200,e/200),l=this.noise2D(t/100,e/100),u=.5+.5*(o+.5*a*.3+l*.2),g=new F(n/2,r/2).minus({x:t,y:e}).length()/F.length({x:n/2,y:r/2});return Bn(u-g,0,1)}async generate(){const{width:t,height:e}=this.config,n=await this.palettePromise,o=document.createElement("canvas").getContext("2d");Pt(o);const a=o.createImageData(t,e);for(const{x:l,y:u}of bn(t,e)){const d=(u*t+l)*4,g=this.getHeight(l,u);let y=.85;if(g>0){const w=g-this.getHeight(l-1,u),R=g-this.getHeight(l,u-1),C=mt.dotProduct(mt.normalize({x:w,y:R,z:.01}),this.lightSource);y=Math.cos(C)}const p=Math.floor(g*(n.width-1))*4;a.data[d+0]=y*n.data[p+0],a.data[d+1]=y*n.data[p+1],a.data[d+2]=y*n.data[p+2],a.data[d+3]=255}return a}}const Pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAQCAYAAAD506FJAAAAAXNSR0IArs4c6QAAARxJREFUeJzt281Kw0AQwPFR/CiJPelFS4MP0rvPIPQJ4sm7B1/IZ/HQgyXXUkJBewm0iEK9CBXyQUJ33Z3s/3dcwuxcMju72RzdPz7t5NdNkshfo+hS2jgbnJTGonhQ+Wx8UT0uInJ6vo8zuX1rnPNl/tEqty5m2avxmF08300PjlG85wYyKduuV0bjZYvCaLwquYytz9FGmj64TqHWsesEfOH65TfB1suP/iov3YByvqz8GtABAAFTWQBs7P+BEKksAEAd2v9uKADSjwNAm0x/AYA/KABAwBoLwHLDXluT4dW16xSgDB2AJ0xcAgK6ogAAATu4AFRdA9aEA0CEjA4ACBgFAAiY7v4d6vzHX4Boz6sO4Ovz23UKQFB+AArbMHnqVCynAAAAAElFTkSuQmCC";function Mn({seed:i=String(Math.random())}={}){const t=Rn(i);return Nn(t(),t(),t(),t())}function Rn(i){let t=1779033703^i.length;for(let e=0;e<i.length;e++)t=Math.imul(t^i.charCodeAt(e),3432918353),t=t<<13|t>>>19;return function(){return t=Math.imul(t^t>>>16,2246822507),t=Math.imul(t^t>>>13,3266489909),(t^=t>>>16)>>>0}}function Nn(i,t,e,n){return function(){i>>>=0,t>>>=0,e>>>=0,n>>>=0;let r=i+t|0;return i=t^t>>>9,t=e+(e<<3)|0,e=e<<21|e>>>11,n=n+1|0,r=r+n|0,e=e+r|0,(r>>>0)/4294967296}}function In(i){return()=>i}function zn(i,...t){return(...e)=>t.reduce((n,r)=>r(n),i(...e))}const Dn=[At(.2,.1,.42,.07,.42,0),At(0,-.07,-.14,-.15,.08,-.15),At(.22,0,.07,.08,.07,.15),At(0,.075,.2,-.1,.43,0)];function Ln({piecesX:i=5,piecesY:t=5,seed:e="apple"}={}){const n=Mn({seed:e}),r=l=>(u,...d)=>n()<.5?l(u,...d):u,o=zn(In(Dn),r(jn),r(On),r(Gn),_n({random:n})),a=Fn({piecesX:i,piecesY:t}).map(qn({createEdge:o})).map(kn).map(Un).map(Hn).map(Yn).map(Jn).map($n({piecesX:i})).map(Qn({piecesY:t})).map(Wn({piecesX:i,piecesY:t}));return{piecesX:i,piecesY:t,pieces:a}}function Fn({piecesX:i,piecesY:t}){const e=[];for(let n=0;n<t;n++)for(let r=0;r<i;r++)e.push({x:r,y:n});return e}function qn({createEdge:i}){return t=>{const e=i(),n=i().map(dt),r=i().map(dt).map(dt),o=i().map(dt).map(dt).map(dt);return{...t,moveArgs:[0,0],edges:[e,n,r,o]}}}function dt({args:i,...t}){const[e,n,r,o,a,l]=i;return{...t,args:[-n,e,-o,r,-l,a]}}function Bt({args:i,...t}){return{...t,args:i.map(e=>-e)}}function kn(i){if(i.x%2===0)return i;const{moveArgs:t,edges:e}=i,[,n]=t,[r,o,a,l]=e,u=r.map(Bt),d=a.map(Bt);return{...i,moveArgs:[1,n],edges:[u,o,d,l]}}function Un(i){if(i.y%2===0)return i;const{moveArgs:t,edges:e}=i,[n]=t,[r,o,a,l]=e,u=o.map(Bt),d=l.map(Bt);return{...i,moveArgs:[n,1],edges:[r,u,a,d]}}function _n({random:i}){return([{command:t,args:[e,n,r,o,a,l]},{command:u,args:[d,g,y,p,w,R]},{command:C,args:[q,B,L,z,x,j]},{command:S,args:[E,P,A,N,b,T]}])=>{const{x:v,y:I}=Rt({random:i,radius:.04}),{x:H,y:K}=Rt({random:i,radius:.04}),{x:nt,y:tt}=Rt({random:i,radius:.01}),et=v+nt,Q=I+tt,Y=rt=>bt(rt);return[{command:t,args:[e,n,r+v,o+I,a+v,l+I].map(Y)},{command:u,args:[d,g,y+H,p-I+K,w-v+H,R-I+K].map(Y)},{command:C,args:[q,B,L-H+et,z-K+Q,x-H+et,j-K+Q].map(Y)},{command:S,args:[E,P,A-et,N-Q,b-et,T-Q].map(Y)}]}}function Rt({random:i,radius:t=.05}){const e=t*Math.sqrt(i()),n=i()*2*Math.PI,r=bt(e*Math.cos(n)),o=bt(e*Math.sin(n));return{x:r,y:o}}function jn([i,t,e,n]){const[r,o]=He({commands:[i,t]});return[r,o,e,n]}function On([i,t,e,n]){const[r,o]=He({commands:[e,n],isEnd:!0});return[i,t,r,o]}function He({commands:i,isEnd:t=!1}){const[{command:e,args:[n,r,o,a,l,u]},{command:d,args:[,g,y,p,w,R]}]=i,C=u-a,q=g,B=t?1:-1;return[{command:e,args:[n,r,bt(o-B*C),u,l,u]},{command:d,args:[B*q,0,y,p,w,R]}]}function Gn(i,{edgeIsVertical:t=!1}={}){const e=t?Ve:Xn,n=(o,a)=>o===0&&a<2,r=(o,a)=>o===3&&1<a;return i.map((o,a)=>{const l=o.args.map((u,d)=>!e(d)||n(a,d)||r(a,d)?u:-u);return{...o,args:l}})}function Hn(i,t,e){const n=e.find(({x:a,y:l})=>a===i.x-1&&l===i.y),r=e.find(({x:a,y:l})=>a===i.x&&l===i.y-1),o=n?Kn({from:n,to:i}):i;return r?Vn({from:r,to:o}):o}function Kn({from:i,to:t}){const e=i.x%2===0?1:3;return Ke({from:i,to:t,index:e})}function Vn({from:i,to:t}){const e=i.y%2===0?2:0;return Ke({from:i,to:t,index:e})}function Ke({from:{edges:i},to:t,index:e}){const n=[...t.edges];return n[e]=i[e],{...t,edges:n}}function Yn(i){const{x:t,y:e,edges:n}=i;if(0<e)return i;const[,...r]=n,o=t%2===0?1:-1,a=[pt(o,0)];return{...i,edges:[a,...r]}}function Jn(i){const{x:t,y:e,edges:n}=i;if(0<t)return i;const[r,o,a]=n,l=e%2===0?1:-1,u=[pt(0,-l)];return{...i,edges:[r,o,a,u]}}function $n({piecesX:i}){return t=>{const{x:e,y:n,edges:r}=t;if(e<i-1)return t;const[o,a,l,u]=r,d=n%2===0?1:-1;if(e%2===0){const y=[pt(0,d)];return{...t,edges:[o,y,l,u]}}const g=[pt(0,-d)];return{...t,edges:[o,a,l,g]}}}function Qn({piecesY:i}){return t=>{const{x:e,y:n,edges:r}=t;if(n<i-1)return t;const[o,a,l,u]=r,d=e%2===0?1:-1;if(n%2===0){const y=[pt(-d,0)];return{...t,edges:[o,a,y,u]}}const g=[pt(d,0)];return{...t,edges:[g,a,l,u]}}}function Wn({piecesX:i,piecesY:t}){return({x:e,y:n,moveArgs:r,edges:o,...a})=>{const l=1/i,u=1/t,[d,g]=r,y=[(e+d)*l,(n+g)*u],p=(C,q)=>q%2===0?C*l:C*u,w=({args:C,...q})=>({...q,args:C.map(p)}),R=o.map(C=>C.map(w));return{x:e,y:n,...a,moveArgs:y,edges:R}}}function Ve(i){return i%2===0}function Xn(i){return!Ve(i)}function pt(i,t){return Ye({command:"l",args:[i,t]})}function At(i,t,e,n,r,o){return Ye({command:"c",args:[i,t,e,n,r,o]})}function Ye({command:i,args:t=[]}){return{command:i,args:t}}function bt(i,t=5){return Number(i.toPrecision(t))}const Tt=20;class Zn extends Phaser.GameObjects.Image{constructor(e,n,r,o){const{gridPos:a,texSize:l,gridSize:u}=o;super(e,n,r,`piece-${a.x}-${a.y}`);_(this,"config");_(this,"pieceSize");_(this,"pieceOrigin");_(this,"originalDepth");_(this,"dragDelta",new F(0,0));_(this,"dragOrigin",new F(0,0));this.config={...o},this.pieceSize=new F(l.x/u.x,l.y/u.y),this.pieceOrigin=this.pieceSize.times(a),this.setOrigin(0),this.originalDepth=Math.random(),this.setDepth(this.originalDepth)}dragRelease(e){let n=F.minus(e,this.dragDelta).minus(this.config.margin);n.x=te(n.x,Tt),n.y=te(n.y,Tt),n=n.plus(this.config.margin),this.scene.tweens.add({targets:[this],duration:300,x:n.x,y:n.y,onComplete:()=>{this.setTint(),this.isCorrectPosition()?(this.emit("piece-in-place",this),this.setDepth(0)):this.setDepth(this.originalDepth)}}),this.emit("sfx","drop-puzzle-piece")}isCorrectPosition(){return this.x===this.config.margin.x&&this.y===this.config.margin.y}dragStart(e){this.dragDelta=F.minus(e,this),this.dragOrigin=new F(e.x,e.y),this.setDepth(1),this.setTint(11206655),this.emit("sfx","pickup-puzzle-piece")}dragMove(e){this.setPosition(e.x-this.dragDelta.x,e.y-this.dragDelta.y)}dragCancel(){this.scene.tweens.add({targets:[this],duration:200,x:this.dragOrigin.x,y:this.dragOrigin.y}),this.setDepth(0)}contains(e){const n=F.minus(e,this.pieceOrigin).minus(this);return this.pieceSize.contains(n)}}class tr{constructor(){_(this,"uiBlocked",()=>!1);_(this,"findDragTarget",()=>{});_(this,"dragTarget")}apply(t){t.input.on("pointerdown",e=>this.onDown(e)),t.input.on("pointermove",e=>this.onMove(e)),t.input.on("pointerup",e=>this.onRelease(e)),t.input.on("gameout",()=>this.onGameOut())}onDown(t){if(this.uiBlocked())return;const e=this.findDragTarget(t);if(e){this.dragTarget=e,this.dragTarget.dragStart(t);return}}onMove(t){this.uiBlocked()||this.dragTarget&&(t.isDown?this.dragTarget.dragMove(t):this.dragTarget.dragCancel(t))}onRelease(t){this.uiBlocked()||this.dragTarget&&(this.dragTarget.dragRelease(t),this.dragTarget=void 0)}onGameOut(){this.uiBlocked()||this.dragTarget&&this.dragTarget.dragMove({x:-1,y:-1})}}const ee=(i,t=Math.random)=>Math.floor(t()*i);class er extends st.Scene{constructor(){super({key:"GameScene"});_(this,"puzzlePieces",[]);_(this,"textureSize",new F(0,0));_(this,"gridSize",new F(0,0));_(this,"margin",new F(0,0));_(this,"targetNumPieces",10)}init(){}preload(){}async createImages(){const e=this.textureSize,n=this.gridSize,o=await new Tn({width:e.x,height:e.y,paletteUrl:Pn}).generate(),a=Ln({piecesX:n.x,piecesY:n.y,seed:"cherry"});{const u=Et(this.textures.createCanvas("island",e.x,e.y)),d=u.getSourceImage();Et(d.getContext("2d")).putImageData(o,0,0),u.refresh()}const l=await createImageBitmap(o);for(const u of a.pieces){const d=Et(this.textures.createCanvas(`piece-${u.x}-${u.y}`,e.x,e.y)),g=d.getSourceImage(),y=Et(g.getContext("2d"));y.lineWidth=2,y.strokeStyle="lightgrey",y.beginPath();let p=new F(u.moveArgs[0],u.moveArgs[1]).times(e);y.moveTo(p.x,p.y);for(const R of u.edges)for(const C of R)if(C.command==="l")p=p.plus(new F(C.args[0],C.args[1]).times(e)),y.lineTo(p.x,p.y);else if(C.command==="c"){const q=p.plus(new F(C.args[0],C.args[1]).times(e)),B=p.plus(new F(C.args[2],C.args[3]).times(e));p=p.plus(new F(C.args[4],C.args[5]).times(e)),y.bezierCurveTo(q.x,q.y,B.x,B.y,p.x,p.y)}y.stroke(),y.clip(),y.drawImage(l,0,0),d.refresh();const w=new Zn(this,0,0,{gridPos:u,texSize:e,gridSize:n,margin:this.margin});this.add.existing(w),this.puzzlePieces.push(w)}for(const u of this.puzzlePieces)u.on("piece-in-place",()=>this.checkPuzzleComplete()),u.on("sfx",this.playSample)}reset(){this.children.each(e=>e.destroy()),this.children.removeAll(),this.textures.remove("island");for(const e of this.puzzlePieces)this.textures.remove(`piece-${e.config.gridPos.x}-${e.config.gridPos.y}`);this.puzzlePieces=[]}playSample(e){console.log(`Please play sfx ${e}`)}checkPuzzleComplete(){this.puzzlePieces.every(e=>e.isCorrectPosition())&&(this.add.text(100,100,"Congratulations - Puzzle Complete!",{font:"64px Bangers",color:"#7744ff"}),this.playSample("puzzle-complete"),setTimeout(()=>{this.targetNumPieces+=3,this.initLevel()},5e3))}scatterPuzzlePieces(){const e=new F(this.textureSize.x/this.gridSize.x,this.textureSize.y/this.gridSize.y);for(const n of this.puzzlePieces){let r=ee(this.textureSize.x-e.x),o=ee(this.textureSize.y-e.y);r-=n.config.gridPos.x*e.x,o-=n.config.gridPos.y*e.y,r-=r%20,o-=o%20,n.setPosition(r,o)}}create(){this.initLevel()}async initLevel(){this.reset();const{width:e,height:n}=this.sys.game.canvas,r=new F(e,n);let o=te(320,Tt);do o-=Tt,this.gridSize=new F(Math.max(2,Math.floor(r.x/o-.5)),Math.max(2,Math.floor(r.y/o-.5)));while(this.gridSize.x*this.gridSize.y<this.targetNumPieces);this.textureSize=F.scale(this.gridSize,o),this.margin=r.minus(this.textureSize).scale(.5),this.add.rectangle(this.margin.x,this.margin.y,this.textureSize.x,this.textureSize.y,11184810).setOrigin(0).setDepth(-1),await this.createImages(),this.scatterPuzzlePieces();const a=new tr;a.findDragTarget=l=>(this.puzzlePieces.sort((u,d)=>d.depth-u.depth),this.puzzlePieces.find(u=>u.contains(l))),a.apply(this)}}var gt={},Nt,me;function nr(){return me||(me=1,Nt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Nt}var It={},ot={},pe;function at(){if(pe)return ot;pe=1;let i;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ot.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},ot.getSymbolTotalCodewords=function(n){return t[n]},ot.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n},ot.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');i=n},ot.isKanjiModeEnabled=function(){return typeof i<"u"},ot.toSJIS=function(n){return i(n)},ot}var zt={},ye;function re(){return ye||(ye=1,function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+e)}}i.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},i.from=function(n,r){if(i.isValid(n))return n;try{return t(n)}catch{return r}}}(zt)),zt}var Dt,we;function rr(){if(we)return Dt;we=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},Dt=i,Dt}var Lt,ve;function ir(){if(ve)return Lt;ve=1;function i(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return i.prototype.set=function(t,e,n,r){const o=t*this.size+e;this.data[o]=n,r&&(this.reservedBit[o]=!0)},i.prototype.get=function(t,e){return this.data[t*this.size+e]},i.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},i.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},Lt=i,Lt}var Ft={},Ce;function or(){return Ce||(Ce=1,function(i){const t=at().getSymbolSize;i.getRowColCoords=function(n){if(n===1)return[];const r=Math.floor(n/7)+2,o=t(n),a=o===145?26:Math.ceil((o-13)/(2*r-2))*2,l=[o-7];for(let u=1;u<r-1;u++)l[u]=l[u-1]-a;return l.push(6),l.reverse()},i.getPositions=function(n){const r=[],o=i.getRowColCoords(n),a=o.length;for(let l=0;l<a;l++)for(let u=0;u<a;u++)l===0&&u===0||l===0&&u===a-1||l===a-1&&u===0||r.push([o[l],o[u]]);return r}}(Ft)),Ft}var qt={},Ee;function sr(){if(Ee)return qt;Ee=1;const i=at().getSymbolSize,t=7;return qt.getPositions=function(n){const r=i(n);return[[0,0],[r-t,0],[0,r-t]]},qt}var kt={},Ae;function ar(){return Ae||(Ae=1,function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};i.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},i.from=function(r){return i.isValid(r)?parseInt(r,10):void 0},i.getPenaltyN1=function(r){const o=r.size;let a=0,l=0,u=0,d=null,g=null;for(let y=0;y<o;y++){l=u=0,d=g=null;for(let p=0;p<o;p++){let w=r.get(y,p);w===d?l++:(l>=5&&(a+=t.N1+(l-5)),d=w,l=1),w=r.get(p,y),w===g?u++:(u>=5&&(a+=t.N1+(u-5)),g=w,u=1)}l>=5&&(a+=t.N1+(l-5)),u>=5&&(a+=t.N1+(u-5))}return a},i.getPenaltyN2=function(r){const o=r.size;let a=0;for(let l=0;l<o-1;l++)for(let u=0;u<o-1;u++){const d=r.get(l,u)+r.get(l,u+1)+r.get(l+1,u)+r.get(l+1,u+1);(d===4||d===0)&&a++}return a*t.N2},i.getPenaltyN3=function(r){const o=r.size;let a=0,l=0,u=0;for(let d=0;d<o;d++){l=u=0;for(let g=0;g<o;g++)l=l<<1&2047|r.get(d,g),g>=10&&(l===1488||l===93)&&a++,u=u<<1&2047|r.get(g,d),g>=10&&(u===1488||u===93)&&a++}return a*t.N3},i.getPenaltyN4=function(r){let o=0;const a=r.data.length;for(let u=0;u<a;u++)o+=r.data[u];return Math.abs(Math.ceil(o*100/a/5)-10)*t.N4};function e(n,r,o){switch(n){case i.Patterns.PATTERN000:return(r+o)%2===0;case i.Patterns.PATTERN001:return r%2===0;case i.Patterns.PATTERN010:return o%3===0;case i.Patterns.PATTERN011:return(r+o)%3===0;case i.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(o/3))%2===0;case i.Patterns.PATTERN101:return r*o%2+r*o%3===0;case i.Patterns.PATTERN110:return(r*o%2+r*o%3)%2===0;case i.Patterns.PATTERN111:return(r*o%3+(r+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}i.applyMask=function(r,o){const a=o.size;for(let l=0;l<a;l++)for(let u=0;u<a;u++)o.isReserved(u,l)||o.xor(u,l,e(r,u,l))},i.getBestMask=function(r,o){const a=Object.keys(i.Patterns).length;let l=0,u=1/0;for(let d=0;d<a;d++){o(d),i.applyMask(d,r);const g=i.getPenaltyN1(r)+i.getPenaltyN2(r)+i.getPenaltyN3(r)+i.getPenaltyN4(r);i.applyMask(d,r),g<u&&(u=g,l=d)}return l}}(kt)),kt}var St={},Se;function Je(){if(Se)return St;Se=1;const i=re(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return St.getBlocksCount=function(r,o){switch(o){case i.L:return t[(r-1)*4+0];case i.M:return t[(r-1)*4+1];case i.Q:return t[(r-1)*4+2];case i.H:return t[(r-1)*4+3];default:return}},St.getTotalCodewordsCount=function(r,o){switch(o){case i.L:return e[(r-1)*4+0];case i.M:return e[(r-1)*4+1];case i.Q:return e[(r-1)*4+2];case i.H:return e[(r-1)*4+3];default:return}},St}var Ut={},wt={},xe;function cr(){if(xe)return wt;xe=1;const i=new Uint8Array(512),t=new Uint8Array(256);return function(){let n=1;for(let r=0;r<255;r++)i[r]=n,t[n]=r,n<<=1,n&256&&(n^=285);for(let r=255;r<512;r++)i[r]=i[r-255]}(),wt.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},wt.exp=function(n){return i[n]},wt.mul=function(n,r){return n===0||r===0?0:i[t[n]+t[r]]},wt}var Be;function ur(){return Be||(Be=1,function(i){const t=cr();i.mul=function(n,r){const o=new Uint8Array(n.length+r.length-1);for(let a=0;a<n.length;a++)for(let l=0;l<r.length;l++)o[a+l]^=t.mul(n[a],r[l]);return o},i.mod=function(n,r){let o=new Uint8Array(n);for(;o.length-r.length>=0;){const a=o[0];for(let u=0;u<r.length;u++)o[u]^=t.mul(r[u],a);let l=0;for(;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},i.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let o=0;o<n;o++)r=i.mul(r,new Uint8Array([1,t.exp(o)]));return r}}(Ut)),Ut}var _t,be;function lr(){if(be)return _t;be=1;const i=ur();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=i.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(n.length+this.degree);r.set(n);const o=i.mod(r,this.genPoly),a=this.degree-o.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(o,a),l}return o},_t=t,_t}var jt={},Ot={},Gt={},Te;function $e(){return Te||(Te=1,Gt.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Gt}var Z={},Pe;function Qe(){if(Pe)return Z;Pe=1;const i="[0-9]+",t="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;Z.KANJI=new RegExp(e,"g"),Z.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Z.BYTE=new RegExp(n,"g"),Z.NUMERIC=new RegExp(i,"g"),Z.ALPHANUMERIC=new RegExp(t,"g");const r=new RegExp("^"+e+"$"),o=new RegExp("^"+i+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Z.testKanji=function(u){return r.test(u)},Z.testNumeric=function(u){return o.test(u)},Z.testAlphanumeric=function(u){return a.test(u)},Z}var Me;function ct(){return Me||(Me=1,function(i){const t=$e(),e=Qe();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},i.getBestModeForData=function(o){return e.testNumeric(o)?i.NUMERIC:e.testAlphanumeric(o)?i.ALPHANUMERIC:e.testKanji(o)?i.KANJI:i.BYTE},i.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},i.isValid=function(o){return o&&o.bit&&o.ccBits};function n(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+r)}}i.from=function(o,a){if(i.isValid(o))return o;try{return n(o)}catch{return a}}}(Ot)),Ot}var Re;function fr(){return Re||(Re=1,function(i){const t=at(),e=Je(),n=re(),r=ct(),o=$e(),a=7973,l=t.getBCHDigit(a);function u(p,w,R){for(let C=1;C<=40;C++)if(w<=i.getCapacity(C,R,p))return C}function d(p,w){return r.getCharCountIndicator(p,w)+4}function g(p,w){let R=0;return p.forEach(function(C){const q=d(C.mode,w);R+=q+C.getBitsLength()}),R}function y(p,w){for(let R=1;R<=40;R++)if(g(p,R)<=i.getCapacity(R,w,r.MIXED))return R}i.from=function(w,R){return o.isValid(w)?parseInt(w,10):R},i.getCapacity=function(w,R,C){if(!o.isValid(w))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=r.BYTE);const q=t.getSymbolTotalCodewords(w),B=e.getTotalCodewordsCount(w,R),L=(q-B)*8;if(C===r.MIXED)return L;const z=L-d(C,w);switch(C){case r.NUMERIC:return Math.floor(z/10*3);case r.ALPHANUMERIC:return Math.floor(z/11*2);case r.KANJI:return Math.floor(z/13);case r.BYTE:default:return Math.floor(z/8)}},i.getBestVersionForData=function(w,R){let C;const q=n.from(R,n.M);if(Array.isArray(w)){if(w.length>1)return y(w,q);if(w.length===0)return 1;C=w[0]}else C=w;return u(C.mode,C.getLength(),q)},i.getEncodedBits=function(w){if(!o.isValid(w)||w<7)throw new Error("Invalid QR Code version");let R=w<<12;for(;t.getBCHDigit(R)-l>=0;)R^=a<<t.getBCHDigit(R)-l;return w<<12|R}}(jt)),jt}var Ht={},Ne;function hr(){if(Ne)return Ht;Ne=1;const i=at(),t=1335,e=21522,n=i.getBCHDigit(t);return Ht.getEncodedBits=function(o,a){const l=o.bit<<3|a;let u=l<<10;for(;i.getBCHDigit(u)-n>=0;)u^=t<<i.getBCHDigit(u)-n;return(l<<10|u)^e},Ht}var Kt={},Vt,Ie;function dr(){if(Ie)return Vt;Ie=1;const i=ct();function t(e){this.mode=i.NUMERIC,this.data=e.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let r,o,a;for(r=0;r+3<=this.data.length;r+=3)o=this.data.substr(r,3),a=parseInt(o,10),n.put(a,10);const l=this.data.length-r;l>0&&(o=this.data.substr(r),a=parseInt(o,10),n.put(a,l*3+1))},Vt=t,Vt}var Yt,ze;function gr(){if(ze)return Yt;ze=1;const i=ct(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(n){this.mode=i.ALPHANUMERIC,this.data=n}return e.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let o;for(o=0;o+2<=this.data.length;o+=2){let a=t.indexOf(this.data[o])*45;a+=t.indexOf(this.data[o+1]),r.put(a,11)}this.data.length%2&&r.put(t.indexOf(this.data[o]),6)},Yt=e,Yt}var Jt,De;function mr(){if(De)return Jt;De=1;const i=ct();function t(e){this.mode=i.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let n=0,r=this.data.length;n<r;n++)e.put(this.data[n],8)},Jt=t,Jt}var $t,Le;function pr(){if(Le)return $t;Le=1;const i=ct(),t=at();function e(n){this.mode=i.KANJI,this.data=n}return e.getBitsLength=function(r){return r*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let r;for(r=0;r<this.data.length;r++){let o=t.toSJIS(this.data[r]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),n.put(o,13)}},$t=e,$t}var Qt={exports:{}},Fe;function yr(){return Fe||(Fe=1,function(i){var t={single_source_shortest_paths:function(e,n,r){var o={},a={};a[n]=0;var l=t.PriorityQueue.make();l.push(n,0);for(var u,d,g,y,p,w,R,C,q;!l.empty();){u=l.pop(),d=u.value,y=u.cost,p=e[d]||{};for(g in p)p.hasOwnProperty(g)&&(w=p[g],R=y+w,C=a[g],q=typeof a[g]>"u",(q||C>R)&&(a[g]=R,l.push(g,R),o[g]=d))}if(typeof r<"u"&&typeof a[r]>"u"){var B=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(B)}return o},extract_shortest_path_from_predecessor_list:function(e,n){for(var r=[],o=n;o;)r.push(o),e[o],o=e[o];return r.reverse(),r},find_path:function(e,n,r){var o=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,r={},o;e=e||{};for(o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var r={value:e,cost:n};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=t}(Qt)),Qt.exports}var qe;function wr(){return qe||(qe=1,function(i){const t=ct(),e=dr(),n=gr(),r=mr(),o=pr(),a=Qe(),l=at(),u=yr();function d(B){return unescape(encodeURIComponent(B)).length}function g(B,L,z){const x=[];let j;for(;(j=B.exec(z))!==null;)x.push({data:j[0],index:j.index,mode:L,length:j[0].length});return x}function y(B){const L=g(a.NUMERIC,t.NUMERIC,B),z=g(a.ALPHANUMERIC,t.ALPHANUMERIC,B);let x,j;return l.isKanjiModeEnabled()?(x=g(a.BYTE,t.BYTE,B),j=g(a.KANJI,t.KANJI,B)):(x=g(a.BYTE_KANJI,t.BYTE,B),j=[]),L.concat(z,x,j).sort(function(E,P){return E.index-P.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function p(B,L){switch(L){case t.NUMERIC:return e.getBitsLength(B);case t.ALPHANUMERIC:return n.getBitsLength(B);case t.KANJI:return o.getBitsLength(B);case t.BYTE:return r.getBitsLength(B)}}function w(B){return B.reduce(function(L,z){const x=L.length-1>=0?L[L.length-1]:null;return x&&x.mode===z.mode?(L[L.length-1].data+=z.data,L):(L.push(z),L)},[])}function R(B){const L=[];for(let z=0;z<B.length;z++){const x=B[z];switch(x.mode){case t.NUMERIC:L.push([x,{data:x.data,mode:t.ALPHANUMERIC,length:x.length},{data:x.data,mode:t.BYTE,length:x.length}]);break;case t.ALPHANUMERIC:L.push([x,{data:x.data,mode:t.BYTE,length:x.length}]);break;case t.KANJI:L.push([x,{data:x.data,mode:t.BYTE,length:d(x.data)}]);break;case t.BYTE:L.push([{data:x.data,mode:t.BYTE,length:d(x.data)}])}}return L}function C(B,L){const z={},x={start:{}};let j=["start"];for(let S=0;S<B.length;S++){const E=B[S],P=[];for(let A=0;A<E.length;A++){const N=E[A],b=""+S+A;P.push(b),z[b]={node:N,lastCount:0},x[b]={};for(let T=0;T<j.length;T++){const v=j[T];z[v]&&z[v].node.mode===N.mode?(x[v][b]=p(z[v].lastCount+N.length,N.mode)-p(z[v].lastCount,N.mode),z[v].lastCount+=N.length):(z[v]&&(z[v].lastCount=N.length),x[v][b]=p(N.length,N.mode)+4+t.getCharCountIndicator(N.mode,L))}}j=P}for(let S=0;S<j.length;S++)x[j[S]].end=0;return{map:x,table:z}}function q(B,L){let z;const x=t.getBestModeForData(B);if(z=t.from(L,x),z!==t.BYTE&&z.bit<x.bit)throw new Error('"'+B+'" cannot be encoded with mode '+t.toString(z)+`.
 Suggested mode is: `+t.toString(x));switch(z===t.KANJI&&!l.isKanjiModeEnabled()&&(z=t.BYTE),z){case t.NUMERIC:return new e(B);case t.ALPHANUMERIC:return new n(B);case t.KANJI:return new o(B);case t.BYTE:return new r(B)}}i.fromArray=function(L){return L.reduce(function(z,x){return typeof x=="string"?z.push(q(x,null)):x.data&&z.push(q(x.data,x.mode)),z},[])},i.fromString=function(L,z){const x=y(L,l.isKanjiModeEnabled()),j=R(x),S=C(j,z),E=u.find_path(S.map,"start","end"),P=[];for(let A=1;A<E.length-1;A++)P.push(S.table[E[A]].node);return i.fromArray(w(P))},i.rawSplit=function(L){return i.fromArray(y(L,l.isKanjiModeEnabled()))}}(Kt)),Kt}var ke;function vr(){if(ke)return It;ke=1;const i=at(),t=re(),e=rr(),n=ir(),r=or(),o=sr(),a=ar(),l=Je(),u=lr(),d=fr(),g=hr(),y=ct(),p=wr();function w(S,E){const P=S.size,A=o.getPositions(E);for(let N=0;N<A.length;N++){const b=A[N][0],T=A[N][1];for(let v=-1;v<=7;v++)if(!(b+v<=-1||P<=b+v))for(let I=-1;I<=7;I++)T+I<=-1||P<=T+I||(v>=0&&v<=6&&(I===0||I===6)||I>=0&&I<=6&&(v===0||v===6)||v>=2&&v<=4&&I>=2&&I<=4?S.set(b+v,T+I,!0,!0):S.set(b+v,T+I,!1,!0))}}function R(S){const E=S.size;for(let P=8;P<E-8;P++){const A=P%2===0;S.set(P,6,A,!0),S.set(6,P,A,!0)}}function C(S,E){const P=r.getPositions(E);for(let A=0;A<P.length;A++){const N=P[A][0],b=P[A][1];for(let T=-2;T<=2;T++)for(let v=-2;v<=2;v++)T===-2||T===2||v===-2||v===2||T===0&&v===0?S.set(N+T,b+v,!0,!0):S.set(N+T,b+v,!1,!0)}}function q(S,E){const P=S.size,A=d.getEncodedBits(E);let N,b,T;for(let v=0;v<18;v++)N=Math.floor(v/3),b=v%3+P-8-3,T=(A>>v&1)===1,S.set(N,b,T,!0),S.set(b,N,T,!0)}function B(S,E,P){const A=S.size,N=g.getEncodedBits(E,P);let b,T;for(b=0;b<15;b++)T=(N>>b&1)===1,b<6?S.set(b,8,T,!0):b<8?S.set(b+1,8,T,!0):S.set(A-15+b,8,T,!0),b<8?S.set(8,A-b-1,T,!0):b<9?S.set(8,15-b-1+1,T,!0):S.set(8,15-b-1,T,!0);S.set(A-8,8,1,!0)}function L(S,E){const P=S.size;let A=-1,N=P-1,b=7,T=0;for(let v=P-1;v>0;v-=2)for(v===6&&v--;;){for(let I=0;I<2;I++)if(!S.isReserved(N,v-I)){let H=!1;T<E.length&&(H=(E[T]>>>b&1)===1),S.set(N,v-I,H),b--,b===-1&&(T++,b=7)}if(N+=A,N<0||P<=N){N-=A,A=-A;break}}}function z(S,E,P){const A=new e;P.forEach(function(I){A.put(I.mode.bit,4),A.put(I.getLength(),y.getCharCountIndicator(I.mode,S)),I.write(A)});const N=i.getSymbolTotalCodewords(S),b=l.getTotalCodewordsCount(S,E),T=(N-b)*8;for(A.getLengthInBits()+4<=T&&A.put(0,4);A.getLengthInBits()%8!==0;)A.putBit(0);const v=(T-A.getLengthInBits())/8;for(let I=0;I<v;I++)A.put(I%2?17:236,8);return x(A,S,E)}function x(S,E,P){const A=i.getSymbolTotalCodewords(E),N=l.getTotalCodewordsCount(E,P),b=A-N,T=l.getBlocksCount(E,P),v=A%T,I=T-v,H=Math.floor(A/T),K=Math.floor(b/T),nt=K+1,tt=H-K,et=new u(tt);let Q=0;const Y=new Array(T),rt=new Array(T);let ut=0;const vt=new Uint8Array(S.buffer);for(let W=0;W<T;W++){const ft=W<I?K:nt;Y[W]=vt.slice(Q,Q+ft),rt[W]=et.encode(Y[W]),Q+=ft,ut=Math.max(ut,ft)}const lt=new Uint8Array(A);let Ct=0,J,$;for(J=0;J<ut;J++)for($=0;$<T;$++)J<Y[$].length&&(lt[Ct++]=Y[$][J]);for(J=0;J<tt;J++)for($=0;$<T;$++)lt[Ct++]=rt[$][J];return lt}function j(S,E,P,A){let N;if(Array.isArray(S))N=p.fromArray(S);else if(typeof S=="string"){let H=E;if(!H){const K=p.rawSplit(S);H=d.getBestVersionForData(K,P)}N=p.fromString(S,H||40)}else throw new Error("Invalid data");const b=d.getBestVersionForData(N,P);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=b;else if(E<b)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+b+`.
`);const T=z(E,P,N),v=i.getSymbolSize(E),I=new n(v);return w(I,E),R(I),C(I,E),B(I,P,0),E>=7&&q(I,E),L(I,T),isNaN(A)&&(A=a.getBestMask(I,B.bind(null,I,P))),a.applyMask(A,I),B(I,P,A),{modules:I,version:E,errorCorrectionLevel:P,maskPattern:A,segments:N}}return It.create=function(E,P){if(typeof E>"u"||E==="")throw new Error("No input text");let A=t.M,N,b;return typeof P<"u"&&(A=t.from(P.errorCorrectionLevel,t.M),N=d.from(P.version),b=a.from(P.maskPattern),P.toSJISFunc&&i.setToSJISFunction(P.toSJISFunc)),j(E,N,A,b)},It}var Wt={},Xt={},Ue;function We(){return Ue||(Ue=1,function(i){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const r=parseInt(n.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+n.slice(0,6).join("")}}i.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:o,scale:o?4:a,margin:r,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},i.getScale=function(n,r){return r.width&&r.width>=n+r.margin*2?r.width/(n+r.margin*2):r.scale},i.getImageWidth=function(n,r){const o=i.getScale(n,r);return Math.floor((n+r.margin*2)*o)},i.qrToImageData=function(n,r,o){const a=r.modules.size,l=r.modules.data,u=i.getScale(a,o),d=Math.floor((a+o.margin*2)*u),g=o.margin*u,y=[o.color.light,o.color.dark];for(let p=0;p<d;p++)for(let w=0;w<d;w++){let R=(p*d+w)*4,C=o.color.light;if(p>=g&&w>=g&&p<d-g&&w<d-g){const q=Math.floor((p-g)/u),B=Math.floor((w-g)/u);C=y[l[q*a+B]?1:0]}n[R++]=C.r,n[R++]=C.g,n[R++]=C.b,n[R]=C.a}}}(Xt)),Xt}var _e;function Cr(){return _e||(_e=1,function(i){const t=We();function e(r,o,a){r.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(o,a,l){let u=l,d=a;typeof u>"u"&&(!a||!a.getContext)&&(u=a,a=void 0),a||(d=n()),u=t.getOptions(u);const g=t.getImageWidth(o.modules.size,u),y=d.getContext("2d"),p=y.createImageData(g,g);return t.qrToImageData(p.data,o,u),e(y,d,g),y.putImageData(p,0,0),d},i.renderToDataURL=function(o,a,l){let u=l;typeof u>"u"&&(!a||!a.getContext)&&(u=a,a=void 0),u||(u={});const d=i.render(o,a,u),g=u.type||"image/png",y=u.rendererOpts||{};return d.toDataURL(g,y.quality)}}(Wt)),Wt}var Zt={},je;function Er(){if(je)return Zt;je=1;const i=We();function t(r,o){const a=r.a/255,l=o+'="'+r.hex+'"';return a<1?l+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':l}function e(r,o,a){let l=r+o;return typeof a<"u"&&(l+=" "+a),l}function n(r,o,a){let l="",u=0,d=!1,g=0;for(let y=0;y<r.length;y++){const p=Math.floor(y%o),w=Math.floor(y/o);!p&&!d&&(d=!0),r[y]?(g++,y>0&&p>0&&r[y-1]||(l+=d?e("M",p+a,.5+w+a):e("m",u,0),u=0,d=!1),p+1<o&&r[y+1]||(l+=e("h",g),g=0)):u++}return l}return Zt.render=function(o,a,l){const u=i.getOptions(a),d=o.modules.size,g=o.modules.data,y=d+u.margin*2,p=u.color.light.a?"<path "+t(u.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",w="<path "+t(u.color.dark,"stroke")+' d="'+n(g,d,u.margin)+'"/>',R='viewBox="0 0 '+y+" "+y+'"',q='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+R+' shape-rendering="crispEdges">'+p+w+`</svg>
`;return typeof l=="function"&&l(null,q),q},Zt}var Oe;function Ar(){if(Oe)return gt;Oe=1;const i=nr(),t=vr(),e=Cr(),n=Er();function r(o,a,l,u,d){const g=[].slice.call(arguments,1),y=g.length,p=typeof g[y-1]=="function";if(!p&&!i())throw new Error("Callback required as last argument");if(p){if(y<2)throw new Error("Too few arguments provided");y===2?(d=l,l=a,a=u=void 0):y===3&&(a.getContext&&typeof d>"u"?(d=u,u=void 0):(d=u,u=l,l=a,a=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(l=a,a=u=void 0):y===2&&!a.getContext&&(u=l,l=a,a=void 0),new Promise(function(w,R){try{const C=t.create(l,u);w(o(C,a,u))}catch(C){R(C)}})}try{const w=t.create(l,u);d(null,o(w,a,u))}catch(w){d(w)}}return gt.create=t.create,gt.toCanvas=r.bind(null,e.render),gt.toDataURL=r.bind(null,e.renderToDataURL),gt.toString=r.bind(null,function(o,a,l){return n.render(o,l)}),gt}var Sr=Ar();const xr=ne(Sr);class Br extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){Pt(this.shadowRoot),this.shadowRoot.innerHTML=`
		<style>
			:host {
				display: flex;
				justify-content: center;
				align-items: center;
				height: 100vh;
			}

			button {
				background-color: #4C50AF; /* Blue */
				border: none;
				color: white;
				text-align: center;
				text-decoration: none;
				display: inline-block;
				font-size: 16px;
				margin: 2rem;
				width: 10rem;
				height: 4rem;
			}
			button:hover {
				background-color: #6C70DF; /* Blue */
			}
			.main {
				position: absolute;
			}
			.qrwrapper {
				position: absolute;
				right: 1rem;
				top: 1rem;
				text-align: center;
			}
			.buttonBar {
				display: flex;
				flex-direction: column;
			}
		</style>
		
		<!-- Animated gradients generated with ChatGPT -->
		<svg width="100%" height="100vh">
			<!-- Define the gradients -->
			<defs>
			<linearGradient id="gradientAnimation" x1="0%" y1="0%" x2="100%" y2="100%">
				<stop offset="0%" stop-color="#ff7e5f">
				<animate attributeName="stop-color" values="#ff7e5f; #feb47b; #6a82fb; #ff7e5f" dur="5s" repeatCount="indefinite" />
				</stop>
				<stop offset="50%" stop-color="#6a82fb">
				<animate attributeName="stop-color" values="#6a82fb; #ff7e5f; #feb47b; #6a82fb" dur="5s" repeatCount="indefinite" />
				</stop>
				<stop offset="100%" stop-color="#feb47b">
				<animate attributeName="stop-color" values="#feb47b; #6a82fb; #ff7e5f; #feb47b" dur="5s" repeatCount="indefinite" />
				</stop>
			</linearGradient>

			<linearGradient id="overlayGradient" x1="0%" y1="0%" x2="100%" y2="0%">
				<stop offset="0%" stop-color="rgba(255, 255, 255, 0.5)" />
				<stop offset="100%" stop-color="rgba(0, 0, 0, 0.5)" />
			</linearGradient>

			<!-- Simulated Mesh Gradient using Radial Gradients -->
			<radialGradient id="meshGradient" cx="50%" cy="50%" r="50%">
				<stop offset="0%" stop-color="#ff9a9e">
				<animate attributeName="stop-color" values="#ff9a9e; #fad0c4; #ffdde1; #ff9a9e" dur="6s" repeatCount="indefinite" />
				</stop>
				<stop offset="50%" stop-color="#fad0c4">
				<animate attributeName="stop-color" values="#fad0c4; #ffdde1; #ff9a9e; #fad0c4" dur="6s" repeatCount="indefinite" />
				</stop>
				<stop offset="100%" stop-color="#ffdde1">
				<animate attributeName="stop-color" values="#ffdde1; #ff9a9e; #fad0c4; #ffdde1" dur="6s" repeatCount="indefinite" />
				</stop>
			</radialGradient>
			</defs>

			<!-- Apply the gradients -->
			<rect width="100%" height="100%" fill="url(#gradientAnimation)" />
			<rect width="100%" height="100%" fill="url(#overlayGradient)" />
			<rect width="100%" height="100%" fill="url(#meshGradient)" opacity="0.5" />
		</svg>

		<div class="main">
			<div class="buttonBar">
				<button id="startGame">Start Game</button>
				<button id="fullScreen">Full Screen</button>
			</div>
		</div>
		<div class="qrwrapper">
			<small>play on mobile!</small><br>
			<canvas id="qrcanvas"></canvas>
		</div>
	`}connectedCallback(){var e,n,r,o,a;(n=(e=this.shadowRoot)==null?void 0:e.querySelector("#startGame"))==null||n.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("Start")),this.dispatchEvent(new CustomEvent("button-pressed"))}),(o=(r=this.shadowRoot)==null?void 0:r.querySelector("#fullScreen"))==null||o.addEventListener("click",()=>{document.documentElement.requestFullscreen({navigationUI:"show"}).then(()=>{}).catch(u=>{alert(`An error occurred while trying to switch into full-screen mode: ${u.message} (${u.name})`)})});const t=(a=this.shadowRoot)==null?void 0:a.getElementById("qrcanvas");xr.toCanvas(t,window.location.toString(),function(l){l&&console.error(l)})}}function br(i,t,e,n=!1){return i.addEventListener(t,e,n),()=>{i.removeEventListener(t,e,n)}}let xt;function Tr(i){return xt||(xt=`scene-component-${ee(Number.MAX_SAFE_INTEGER)}`,customElements.define(xt,i)),xt}class Pr extends st.Scene{constructor({key:e,next:n}){super({key:e});_(this,"component");_(this,"unregister",[]);_(this,"next");this.next=n}async create(){this.game.canvas.setAttribute("style","display: none;");const n=Tr(Br);this.component=document.createElement(n),this.component.setAttribute("style","display: visible;"),document.body.appendChild(this.component),this.unregister=[br(this.component,"Start",()=>this.startGame())],this.events.on("shutdown",()=>this.shutdown())}startGame(){this.scene.start(this.next)}shutdown(){var n;this.unregister.forEach(r=>r()),(n=this.component)==null||n.setAttribute("style","display: none;"),this.game.canvas.setAttribute("style","display: visible;")}}const Mr={type:st.AUTO,disableContextMenu:!0,backgroundColor:"#ffffbb",fps:{target:60},scale:{mode:st.Scale.RESIZE},localStorageName:"krampus64-amarillion",scene:[vn,Cn,er,new Pr({key:"TitleScreen",next:"GameScene"})]};class Rr extends st.Game{constructor(){super(Mr)}}new Rr;
